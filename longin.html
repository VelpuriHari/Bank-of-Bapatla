<!DOCTYPE html>
<html lang="en">
  <head>
    <title>longin</title>
    <style>
      .input {
        width: 300px;
        height: 30px;
        border-top: 10px;
        border-left: 10px;
        border-right: 10px;
        padding: 15px;
      }
    </style>
  </head>
  <body>
    <div
      style="
        width: 500px;
        height: 500px;
        text-align: center;
        margin: auto;
        border: solid;
        border-radius: 20px;
      "
    >
      <h1 id="head">Log in</h1>
      <hr />
      <div
        style="
          height: 150px;
          width: 200px;
          background-color: aquamarine;
          margin: auto;
          border-radius: 10px;
        "
      >
        <marquee direction="right">Bank of bapatla</marquee>
      </div>
      <div>
        <table style="margin: auto; text-align: left">
          <tr>
            <td>
              <h6 id="err" style="color: red"></h6>
            </td>
          </tr>
          <tr>
            <td>
              <input
                class="input"
                id="userid"
                type="text"
                placeholder="Enter user id"
              />
            </td>
          </tr>

          <tr>
            <td>
              <input
                class="input"
                id="password"
                type="password"
                placeholder="Enter password"
              />
            </td>
          </tr>

          <tr style="text-align: center">
            <td>
              <button id="loginForm">Login</button>
            </td>
          </tr>
        </table>
      </div>
    </div>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
      import {
        getDatabase,
        ref,
        set,
        onValue,
      } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-database.js";

      const firebaseConfig = {
        apiKey: "AIzaSyDaassIFq9p0Ypc0FDN9uKhj6fHALYygTU",
        authDomain: "bankofbapatla.firebaseapp.com",
        projectId: "bankofbapatla",
        storageBucket: "bankofbapatla.appspot.com",
        messagingSenderId: "101833800062",
        appId: "1:101833800062:web:7d631e50c24084b8655b2f",
        measurementId: "G-M1Z848VMYT",
        databaseURL:
          "https://bankofbapatla-default-rtdb.asia-southeast1.firebasedatabase.app",
      };
      (function () {
        function getText() {
          var userid = document.getElementById("userid").value;
          const starCountRef = ref(db, "users/" + userid);
          onValue(starCountRef, (snapshot) => {
            const data = snapshot.val();
            alert("data");
            var password = document.getElementById("password").value;
            if (password == data) {
              window.open("index..html");
            } else {
              document.getElementById(
                "err"
              ).innerHTML = `Password entered is worng`;
            }
          });
        }

        document
          .getElementById("loginForm")
          .addEventListener("click", getText, true);
      })();
      const app = initializeApp(firebaseConfig);
      const db = getDatabase();
    </script>
  </body>
</html>
