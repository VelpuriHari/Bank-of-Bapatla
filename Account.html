<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Craete Account</title>
  </head>
  <body>
    <div id="formid">
      <table
        style="
          padding: 30px;
          border: solid;
          margin: auto;
          padding: 30px;
          border-radius: 10px;
          background-color: rgb(181, 225, 151);
        "
      >
        <marquee direction="right" scrollamount="20">Bank of Bapatla</marquee>
        <tr>
          <caption>
            <h1 style="text-align: center">CREATE ACCOUNT</h1>
          </caption>
        </tr>
        <tr>
          <td>First Name:</td>
          <td><input type="text" id="1" name="fname" /></td>
        </tr>
        <tr>
          <td>Middle Name:</td>
          <td><input type="text" id="2" name="mname" required /></td>
        </tr>
        <tr>
          <td>Last Name:</td>
          <td><input type="text" id="3" name="lname" /></td>
        </tr>
        <tr>
          <td>Date of Birth:</td>
          <td><input type="date" id="3" name="date" /></td>
        </tr>
        <tr>
          <td>Father/Husband Name:</td>
          <td><input type="text" id="4" name="hname" /></td>
        </tr>
        <tr>
          <td>Mobile Number:</td>
          <td>
            <input type="tel" id="5" maxlength="10" name="Phno" required />
          </td>
        </tr>
        <tr>
          <td>Gender:</td>
          <td>
            <input type="radio" id="6" value="m" name="gender" />Male<input
              type="radio"
              value="f"
              name="gender"
            />Female
          </td>
        </tr>
        <tr>
          <td>E-mail:</td>
          <td>
            <input
              type="email"
              id="7"
              placeholder="example@gmail.com"
              name="email"
              required
            />
          </td>
        </tr>
        <tr>
          <td>Adhar Card No:</td>
          <td><input type="number" id="8" name="adhar" /></td>
        </tr>
        <tr>
          <td>PAN Card No:</td>
          <td><input type="number" id="9" name="PAN" /></td>
        </tr>
        <tr>
          <td>Age:</td>
          <td><input type="number" id="10" name="age" /></td>
        </tr>

        <tr>
          <td>Upload Your Photo:</td>
          <td><input type="file" id="11" name="photo" /></td>
        </tr>

        <tr>
          <td>Upload Income Certificate:</td>
          <td><input type="file" id="13" name="incert" /></td>
        </tr>
        <tr>
          <td>Address:</td>
          <td>
            <textarea
              rows="4"
              id="14"
              cols="20"
              placeholder="Dno,street,town,mandal,dist,State"
              required
            ></textarea>
          </td>
        </tr>
        <tr>
          <td>Pincode:</td>
          <td><input type="number" id="15" name="pincode" /></td>
        </tr>

        <tr style="text-align: center">
          <td>
            <button id="sub">SUBMIT</button>
          </td>
          <td><input id="ret" type="RESET" /></td>
        </tr>
      </table>
    </div>
  </body>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
    import {
      getDatabase,
      ref,
      set,
      onValue,
    } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDaassIFq9p0Ypc0FDN9uKhj6fHALYygTU",
      authDomain: "bankofbapatla.firebaseapp.com",
      projectId: "bankofbapatla",
      storageBucket: "bankofbapatla.appspot.com",
      messagingSenderId: "101833800062",
      appId: "1:101833800062:web:7d631e50c24084b8655b2f",
      measurementId: "G-M1Z848VMYT",
      databaseURL:
        "https://bankofbapatla-default-rtdb.asia-southeast1.firebasedatabase.app",
    };

    (function () {
      function getText() {
        document.getElementById("sub").disabled = true;
        var acc_num =
          Math.round(Math.random() * (100000000000 - 10000000000 + 1)) +
          10000000000;
        localStorage.setItem("accnum", acc_num);
        var email = document.getElementById("7").value;
        localStorage.setItem("email", email);

        var name = document.getElementById("2").value;
        var Phno = document.getElementById("5").value;
        var address = document.getElementById("14").value;
        const db = getDatabase();
        set(ref(db, "Accounts/" + acc_num), {
          name: name,
          Phno: Phno,
          address: address,
        }).then(() => {
          window.open("accountNum.html");
        });
      }

      document.getElementById("sub").addEventListener("click", getText, true);
    })();
    const app = initializeApp(firebaseConfig);
    const db = getDatabase();
  </script>
</html>
